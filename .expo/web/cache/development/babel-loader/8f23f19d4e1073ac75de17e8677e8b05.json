{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { Camera } from 'expo-camera';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar EditProfile = function (_Component) {\n  _inherits(EditProfile, _Component);\n\n  var _super = _createSuper(EditProfile);\n\n  function EditProfile(props) {\n    var _this;\n\n    _classCallCheck(this, EditProfile);\n\n    _this = _super.call(this, props);\n\n    _this.sendToServer = function _callee(data) {\n      var id, token, res, blob;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              id = 10;\n              token = 'a3b0601e54775e60b01664b1a5273d54';\n              _context.next = 4;\n              return _regeneratorRuntime.awrap(fetch(data.base64));\n\n            case 4:\n              res = _context.sent;\n              _context.next = 7;\n              return _regeneratorRuntime.awrap(res.blob());\n\n            case 7:\n              blob = _context.sent;\n              return _context.abrupt(\"return\", fetch(\"http://localhost:3333/api/1.0.0/user/\" + id + \"/photo\", {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'image/png',\n                  'X-Authorization': token\n                },\n                body: blob\n              }).then(function (response) {\n                console.log('Picture added', response);\n              }).catch(function (err) {\n                console.log(err);\n              }));\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.takePicture = function _callee2() {\n      var options;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!_this.camera) {\n                _context2.next = 4;\n                break;\n              }\n\n              options = {\n                quality: 0.5,\n                base64: true,\n                onPictureSaved: function onPictureSaved(data) {\n                  return _this.sendToServer(data);\n                }\n              };\n              _context2.next = 4;\n              return _regeneratorRuntime.awrap(_this.camera.takePictureAsync(options));\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.state = {\n      hasPermission: null,\n      type: Camera.Constants.Type.back\n    };\n    return _this;\n  }\n\n  _createClass(EditProfile, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _await$Camera$request, status;\n\n      return _regeneratorRuntime.async(function componentDidMount$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(Camera.requestCameraPermissionsAsync());\n\n            case 2:\n              _await$Camera$request = _context3.sent;\n              status = _await$Camera$request.status;\n              this.setState({\n                hasPermission: status === 'granted'\n              });\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (this.state.hasPermission) {\n        return _jsx(View, {\n          style: styles.container,\n          children: _jsx(Camera, {\n            style: styles.camera,\n            type: this.state.type,\n            ref: function ref(_ref) {\n              return _this2.camera = _ref;\n            },\n            children: _jsx(View, {\n              style: styles.buttonContainer,\n              children: _jsx(TouchableOpacity, {\n                style: styles.button,\n                onPress: function onPress() {\n                  _this2.takePicture();\n                },\n                children: _jsx(Text, {\n                  style: styles.text,\n                  children: \" Take Photo \"\n                })\n              })\n            })\n          })\n        });\n      } else {\n        return _jsx(Text, {\n          children: \"No access to camera\"\n        });\n      }\n    }\n  }]);\n\n  return EditProfile;\n}(Component);\n\nexport default EditProfile;\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  camera: {\n    flex: 1\n  },\n  buttonContainer: {\n    flex: 1,\n    backgroundColor: 'transparent',\n    flexDirection: 'row',\n    margin: 20\n  },\n  button: {\n    flex: 0.1,\n    alignSelf: 'flex-end',\n    alignItems: 'center'\n  },\n  text: {\n    fontSize: 18,\n    color: 'white'\n  }\n});","map":{"version":3,"sources":["C:/Users/louis/Desktop/Spacebook/screens/EditProfile.js"],"names":["React","Component","Camera","EditProfile","props","sendToServer","data","id","token","fetch","base64","res","blob","method","headers","body","then","response","console","log","catch","err","takePicture","camera","options","quality","onPictureSaved","takePictureAsync","state","hasPermission","type","Constants","Type","back","requestCameraPermissionsAsync","status","setState","styles","container","ref","buttonContainer","button","text","StyleSheet","create","flex","backgroundColor","flexDirection","margin","alignSelf","alignItems","fontSize","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { StyleSheet, Text, View, TouchableOpacity } from 'react-native';\r\nimport { Camera } from 'expo-camera';\r\n\r\nclass EditProfile extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      hasPermission: null,\r\n      type: Camera.Constants.Type.back,\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { status } = await Camera.requestCameraPermissionsAsync();\r\n    this.setState({ hasPermission: status === 'granted' });\r\n  }\r\n\r\n  sendToServer = async (data) => {\r\n    // Get these from AsyncStorage\r\n    let id = 10;\r\n    let token = 'a3b0601e54775e60b01664b1a5273d54';\r\n\r\n    let res = await fetch(data.base64);\r\n    let blob = await res.blob();\r\n\r\n    return fetch(`http://localhost:3333/api/1.0.0/user/${id}/photo`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'image/png',\r\n        'X-Authorization': token,\r\n      },\r\n      body: blob,\r\n    })\r\n      .then((response) => {\r\n        console.log('Picture added', response);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  takePicture = async () => {\r\n    if (this.camera) {\r\n      const options = {\r\n        quality: 0.5,\r\n        base64: true,\r\n        onPictureSaved: (data) => this.sendToServer(data),\r\n      };\r\n      await this.camera.takePictureAsync(options);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    if (this.state.hasPermission) {\r\n      return (\r\n        <View style={styles.container}>\r\n          <Camera\r\n            style={styles.camera}\r\n            type={this.state.type}\r\n            ref={(ref) => (this.camera = ref)}\r\n          >\r\n            <View style={styles.buttonContainer}>\r\n              <TouchableOpacity\r\n                style={styles.button}\r\n                onPress={() => {\r\n                  this.takePicture();\r\n                }}\r\n              >\r\n                <Text style={styles.text}> Take Photo </Text>\r\n              </TouchableOpacity>\r\n            </View>\r\n          </Camera>\r\n        </View>\r\n      );\r\n    } else {\r\n      return <Text>No access to camera</Text>;\r\n    }\r\n  }\r\n}\r\n\r\nexport default EditProfile;\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n  },\r\n  camera: {\r\n    flex: 1,\r\n  },\r\n  buttonContainer: {\r\n    flex: 1,\r\n    backgroundColor: 'transparent',\r\n    flexDirection: 'row',\r\n    margin: 20,\r\n  },\r\n  button: {\r\n    flex: 0.1,\r\n    alignSelf: 'flex-end',\r\n    alignItems: 'center',\r\n  },\r\n  text: {\r\n    fontSize: 18,\r\n    color: 'white',\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}