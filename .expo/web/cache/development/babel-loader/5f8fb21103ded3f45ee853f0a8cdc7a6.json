{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar FriendRequest = function (_Component) {\n  _inherits(FriendRequest, _Component);\n\n  var _super = _createSuper(FriendRequest);\n\n  function FriendRequest(props) {\n    var _this;\n\n    _classCallCheck(this, FriendRequest);\n\n    _this = _super.call(this, props);\n\n    _this.getRequest = function _callee() {\n      var navigation, token;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              navigation = _this.props.navigation;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('@session_token'));\n\n            case 3:\n              token = _context.sent;\n              return _context.abrupt(\"return\", fetch('http://localhost:3333/api/1.0.0/friendrequests', {\n                method: 'GET',\n                headers: {\n                  'X-Authorization': token\n                }\n              }).then(function (response) {\n                if (response.status === 200) {\n                  return response.json();\n                }\n\n                if (response.status === 401) {\n                  navigation.navigate('login');\n                } else {\n                  throw 'Something went wrong';\n                }\n              }).then(function (responseJson) {\n                _this.setState({\n                  listData: responseJson\n                });\n              }).catch(function (error) {\n                console.log(error);\n              }));\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.declineRequest = function _callee2(userId) {\n      var token, navigation;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('@session_token'));\n\n            case 2:\n              token = _context2.sent;\n              navigation = _this.props.navigation;\n              fetch(\"http://localhost:3333/api/1.0.0/friendrequests/\" + userId, {\n                method: 'DELETE',\n                headers: {\n                  'X-Authorization': token\n                }\n              }).then(function (response) {\n                if (response.status === 200) {\n                  return response.json();\n                }\n\n                if (response.status === 401) {\n                  navigation.navigate('login');\n                } else if (response.status === 404) {\n                  throw new Error('Not found');\n                } else {\n                  throw 'Something went wrong';\n                }\n              });\n\n            case 5:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.acceptRequest = function _callee3(userId) {\n      var token, navigation;\n      return _regeneratorRuntime.async(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('@session_token'));\n\n            case 2:\n              token = _context3.sent;\n              navigation = _this.props.navigation;\n              fetch(\"http://localhost:3333/api/1.0.0/friendrequests/\" + userId, {\n                method: 'POST',\n                headers: {\n                  'X-Authorization': token\n                }\n              }).then(function (response) {\n                if (response.status === 200) {\n                  _this.getRequest();\n                }\n\n                if (response.status === 401) {\n                  navigation.navigate('login');\n                } else if (response.status === 404) {\n                  throw new Error('Not found');\n                } else {\n                  throw 'Something went wrong';\n                }\n              });\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.state = {\n      listData: []\n    };\n    return _this;\n  }\n\n  _createClass(FriendRequest, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var navigation = this.props.navigation;\n      this.unsubscribe = navigation.addListener('focus', function () {\n        _this2.getRequest();\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.unsubscribe();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var listData = this.state.listData;\n      return _jsx(ScrollView, {\n        style: styles.backgrd,\n        children: _jsx(FlatList, {\n          data: listData,\n          renderItem: function renderItem(_ref) {\n            var item = _ref.item;\n            return _jsx(View, {\n              children: _jsx(View, {\n                style: styles.postContainer,\n                children: _jsxs(Text, {\n                  children: [item.first_name, \" \", item.last_name, _jsx(Button, {\n                    style: styles.addButton,\n                    title: \"Accept\",\n                    onPress: function onPress() {\n                      return _this3.acceptRequest(item.user_id);\n                    }\n                  }), _jsx(Button, {\n                    style: styles.addButton,\n                    title: \"Decline\",\n                    onPress: function onPress() {\n                      return _this3.declineRequest(item.user_id);\n                    }\n                  })]\n                })\n              })\n            });\n          }\n        })\n      });\n    }\n  }]);\n\n  return FriendRequest;\n}(Component);\n\nvar styles = StyleSheet.create({\n  backgrd: {\n    backgroundColor: '#3b5998'\n  },\n  container: {\n    flex: 1\n  },\n  image: {\n    width: 30,\n    height: 30,\n    marginRight: 10\n  },\n  name: {\n    fontSize: 16,\n    marginTop: 5\n  },\n  addButton: {\n    backgroundColor: '#8b9dc3',\n    padding: 10,\n    margin: 5,\n    borderRadius: 15\n  },\n  postContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    backgroundColor: 'white',\n    borderRadius: 10,\n    marginTop: 30,\n    borderWidth: 2\n  },\n  rightButtons: {\n    flexDirection: 'row',\n    marginLeft: 300\n  }\n});\nexport default FriendRequest;","map":{"version":3,"sources":["C:/Users/louis/Desktop/Spacebook/screens/friendRequestScreen.js"],"names":["React","Component","AsyncStorage","FriendRequest","props","getRequest","navigation","getItem","token","fetch","method","headers","then","response","status","json","navigate","responseJson","setState","listData","catch","error","console","log","declineRequest","userId","Error","acceptRequest","state","unsubscribe","addListener","styles","backgrd","item","postContainer","first_name","last_name","addButton","user_id","StyleSheet","create","backgroundColor","container","flex","image","width","height","marginRight","name","fontSize","marginTop","padding","margin","borderRadius","flexDirection","justifyContent","alignItems","borderWidth","rightButtons","marginLeft"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {\n  Text,\n  ScrollView,\n  Button,\n  StyleSheet,\n  View,\n  FlatList,\n  Image,\n} from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nclass FriendRequest extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      listData: [],\n    };\n  }\n\n  componentDidMount() {\n    const { navigation } = this.props;\n    this.unsubscribe = navigation.addListener('focus', () => {\n      this.getRequest();\n    });\n  }\n\n  componentWillUnmount() {\n    this.unsubscribe();\n  }\n\n  // Button/Text box to add a post\n  getRequest = async () => {\n    const { navigation } = this.props;\n    const token = await AsyncStorage.getItem('@session_token');\n    return fetch('http://localhost:3333/api/1.0.0/friendrequests', {\n      method: 'GET',\n      headers: {\n        'X-Authorization': token,\n      },\n    })\n      .then((response) => {\n        if (response.status === 200) {\n          return response.json();\n        }\n        if (response.status === 401) {\n          navigation.navigate('login');\n        } else {\n          throw 'Something went wrong';\n        }\n      })\n      .then((responseJson) => {\n        this.setState({\n          listData: responseJson,\n        });\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  };\n\n  declineRequest = async (userId) => {\n    const token = await AsyncStorage.getItem('@session_token');\n    const { navigation } = this.props;\n    fetch(`http://localhost:3333/api/1.0.0/friendrequests/${userId}`, {\n      method: 'DELETE',\n      headers: {\n        'X-Authorization': token,\n      },\n    }).then((response) => {\n      if (response.status === 200) {\n        return response.json();\n      }\n      if (response.status === 401) {\n        navigation.navigate('login');\n      } else if (response.status === 404) {\n        throw new Error('Not found');\n      } else {\n        throw 'Something went wrong';\n      }\n    });\n  };\n\n  acceptRequest = async (userId) => {\n    const token = await AsyncStorage.getItem('@session_token');\n    const { navigation } = this.props;\n    fetch(`http://localhost:3333/api/1.0.0/friendrequests/${userId}`, {\n      method: 'POST',\n      headers: {\n        'X-Authorization': token,\n      },\n    }).then((response) => {\n      if (response.status === 200) {\n        this.getRequest();\n      }\n      if (response.status === 401) {\n        navigation.navigate('login');\n      } else if (response.status === 404) {\n        throw new Error('Not found');\n      } else {\n        throw 'Something went wrong';\n      }\n    });\n  };\n\n  render() {\n    const { listData } = this.state;\n    return (\n      <ScrollView style={styles.backgrd}>\n        <FlatList\n          data={listData}\n          renderItem={({ item }) => (\n            <View>\n              <View style={styles.postContainer}>\n                <Text>\n                  {item.first_name} {item.last_name}\n                  <Button\n                    style={styles.addButton}\n                    title=\"Accept\"\n                    onPress={() => this.acceptRequest(item.user_id)}\n                  />\n                  <Button\n                    style={styles.addButton}\n                    title=\"Decline\"\n                    onPress={() => this.declineRequest(item.user_id)}\n                  />\n                </Text>\n              </View>\n            </View>\n          )}\n        />\n      </ScrollView>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  backgrd: {\n    backgroundColor: '#3b5998',\n  },\n  container: {\n    flex: 1,\n  },\n  image: {\n    width: 30,\n    height: 30,\n    marginRight: 10,\n  },\n  name: {\n    fontSize: 16,\n    marginTop: 5,\n  },\n  addButton: {\n    backgroundColor: '#8b9dc3',\n    padding: 10,\n    margin: 5,\n    borderRadius: 15,\n  },\n  postContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    backgroundColor: 'white',\n    borderRadius: 10,\n    marginTop: 30,\n    borderWidth: 2,\n  },\n  rightButtons: {\n    flexDirection: 'row',\n    marginLeft: 300,\n  },\n});\n\nexport default FriendRequest;\n"]},"metadata":{},"sourceType":"module"}