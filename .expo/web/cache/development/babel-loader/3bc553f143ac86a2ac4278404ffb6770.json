{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport { Camera } from 'expo-camera';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar EditProfile = function (_Component) {\n  _inherits(EditProfile, _Component);\n\n  var _super = _createSuper(EditProfile);\n\n  function EditProfile(props) {\n    var _this;\n\n    _classCallCheck(this, EditProfile);\n\n    _this = _super.call(this, props);\n\n    _this.addPhoto = function _callee(data) {\n      var token, uID, res, blob;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('@session_token'));\n\n            case 2:\n              token = _context.sent;\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem('@user_id'));\n\n            case 5:\n              uID = _context.sent;\n              _context.next = 8;\n              return _regeneratorRuntime.awrap(fetch(data.base64));\n\n            case 8:\n              res = _context.sent;\n              _context.next = 11;\n              return _regeneratorRuntime.awrap(res.blob());\n\n            case 11:\n              blob = _context.sent;\n              return _context.abrupt(\"return\", fetch('http://localhost:3333/api/1.0.0/user/' + id + '/photo', {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'image/png',\n                  'X-Authorization': token\n                },\n                body: blob\n              }).then(function (response) {\n                console.log('Picture added', response);\n              }).catch(function (err) {\n                console.log(err);\n              }));\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.takePicture = function _callee2() {\n      var options;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!_this.camera) {\n                _context2.next = 4;\n                break;\n              }\n\n              options = {\n                quality: 0.5,\n                base64: true,\n                onPictureSaved: function onPictureSaved(data) {\n                  return _this.sendToServer(data);\n                }\n              };\n              _context2.next = 4;\n              return _regeneratorRuntime.awrap(_this.camera.takePictureAsync(options));\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.state = {\n      hasPermission: null,\n      type: Camera.Constants.Type.back\n    };\n    return _this;\n  }\n\n  _createClass(EditProfile, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _await$Camera$request, status;\n\n      return _regeneratorRuntime.async(function componentDidMount$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(Camera.requestCameraPermissionsAsync());\n\n            case 2:\n              _await$Camera$request = _context3.sent;\n              status = _await$Camera$request.status;\n              this.setState({\n                hasPermission: status === 'granted'\n              });\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (this.state.hasPermission) {\n        return _jsx(View, {\n          style: styles.container,\n          children: _jsx(Camera, {\n            style: styles.camera,\n            type: this.state.type,\n            ref: function ref(_ref) {\n              return _this2.camera = _ref;\n            },\n            children: _jsx(View, {\n              style: styles.buttonContainer,\n              children: _jsx(TouchableOpacity, {\n                style: styles.button,\n                onPress: function onPress() {\n                  _this2.takePicture();\n                },\n                children: _jsx(Text, {\n                  style: styles.text,\n                  children: \" Take Photo \"\n                })\n              })\n            })\n          })\n        });\n      } else {\n        return _jsx(Text, {\n          children: \"No access to camera\"\n        });\n      }\n    }\n  }]);\n\n  return EditProfile;\n}(Component);\n\nexport default EditProfile;","map":{"version":3,"sources":["C:/Users/louis/Desktop/Spacebook/screens/EditProfile.js"],"names":["React","Component","Camera","EditProfile","props","addPhoto","data","AsyncStorage","getItem","token","uID","fetch","base64","res","blob","id","method","headers","body","then","response","console","log","catch","err","takePicture","camera","options","quality","onPictureSaved","sendToServer","takePictureAsync","state","hasPermission","type","Constants","Type","back","requestCameraPermissionsAsync","status","setState","styles","container","ref","buttonContainer","button","text"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Text, View, StyleSheet, TouchableOpacity } from 'react-native';\r\nimport { Camera } from 'expo-camera';\r\n\r\nclass EditProfile extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      hasPermission: null,\r\n      type: Camera.Constants.Type.back,\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const { status } = await Camera.requestCameraPermissionsAsync();\r\n    this.setState({ hasPermission: status === 'granted' });\r\n  }\r\n  // Show friend request (Accept/Reject this)\r\n  addPhoto = async (data) => {\r\n    // Get these from AsyncStorage\r\n    const token = await AsyncStorage.getItem('@session_token');\r\n    const uID = await AsyncStorage.getItem('@user_id');\r\n\r\n    let res = await fetch(data.base64);\r\n    let blob = await res.blob();\r\n\r\n    return fetch('http://localhost:3333/api/1.0.0/user/' + id + '/photo', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'image/png',\r\n        'X-Authorization': token,\r\n      },\r\n      body: blob,\r\n    })\r\n      .then((response) => {\r\n        console.log('Picture added', response);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  takePicture = async () => {\r\n    if (this.camera) {\r\n      const options = {\r\n        quality: 0.5,\r\n        base64: true,\r\n        onPictureSaved: (data) => this.sendToServer(data),\r\n      };\r\n      await this.camera.takePictureAsync(options);\r\n    }\r\n  };\r\n\r\n  // Show current friends\r\n\r\n  render() {\r\n    if (this.state.hasPermission) {\r\n      return (\r\n        <View style={styles.container}>\r\n          <Camera\r\n            style={styles.camera}\r\n            type={this.state.type}\r\n            ref={(ref) => (this.camera = ref)}\r\n          >\r\n            <View style={styles.buttonContainer}>\r\n              <TouchableOpacity\r\n                style={styles.button}\r\n                onPress={() => {\r\n                  this.takePicture();\r\n                }}\r\n              >\r\n                <Text style={styles.text}> Take Photo </Text>\r\n              </TouchableOpacity>\r\n            </View>\r\n          </Camera>\r\n        </View>\r\n      );\r\n    } else {\r\n      return <Text>No access to camera</Text>;\r\n    }\r\n  }\r\n}\r\n\r\nexport default EditProfile;\r\n"]},"metadata":{},"sourceType":"module"}